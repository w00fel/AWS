#
# Cluster name
#
name: CDH-Cluster-AWS

#
# Cloud provider configuration
#
provider {
    type: aws
    publishAccessKeys: true
    associatePublicIpAddresses: true
    rootVolumeSizeGB: 80

    region: region-REPLACE-ME
    subnetId: subnetId-REPLACE-ME
    securityGroupsIds: securityGroupsIds-REPLACE-ME
    instanceNamePrefix: cloudera-director
}

#
# SSH credentials to use to connect to the instances
#
ssh {
    username: ec2-user
    privateKey: /home/ec2-user/privateKeyName-REPLACE-ME
}

#
# A list of instance types to use for group of nodes or management services
#
instances {
    manager {
        type: manager-type-REPLACE-ME
        image: image-REPLACE-ME

        tags {
            owner: ${?USER}
        }
    }

    master {
        type: master-type-REPLACE-ME
        image: image-REPLACE-ME

        tags {
            owner: ${?USER}
        }
    }

    worker {
        type: worker-type-REPLACE-ME
        image: image-REPLACE-ME

        tags {
            owner: ${?USER}
        }
    }
}

#
# Configuration for Cloudera Manager.
#
cloudera-manager {
    instance: ${instances.manager} {
        tags {
            application: "Cloudera Manager 5"
            group: manager
        }
    }
    #
    # There are three mutually exclusive options for setting up Cloudera Manager's license.
    # 1. License text may be embedded in this file using the "license" field. Triple quotes (""")
    #    are recommended for including multi-line text strings.
    # 2. The "licensePath" can be used to specify the path to a file containing the license.
    # 3. The "enableEnterpriseTrial" flag indicates whether the 60-Day Cloudera Enterprise Trial
    #    should be activated when no license is present. This must not be set to true if a
    #    license is included using either "license" or "licensePath".

    #
    # Embed a license for Cloudera Manager
    #
    # license: """
    #   -----BEGIN PGP SIGNED MESSAGE-----
    #   Hash: SHA1
    #
    # {
    #   "version"        : 1,
    #   "name"           : "License Owner",
    #   "uuid"           : "license id",
    #   "expirationDate" : 0,
    #   "features"       : [ "FEATURE1", "FEATURE2" ]
    # }
    # -----BEGIN PGP SIGNATURE-----
    # Version: GnuPG v1.4.11 (GNU/Linux)
    #
    # PGP SIGNATURE
    # -----END PGP SIGNATURE-----
    # """

    #
    # Include a license for Cloudera Manager from an external file
    #
    # licensePath: "/path/to/license.txt.asc"

    #
    # Activate 60-Day Cloudera Enterprise Trial
    #
    enableEnterpriseTrial: true

    #
    # Install unlimited strength JCE policy files along with Cloudera Manager
    #
    unlimitedJCE: true
}

#
# Cluster description
#
cluster {
    products {
        CDH: 5
    }

    services: [HDFS, YARN, ZOOKEEPER, HBASE]

    masters {
        count: master-count-REPLACE-ME

        instance: ${instances.master} {
            tags {
                group: master
            }
        }

        roles {
            HDFS: ${roles.HDFS_MASTERS}
            YARN: ${roles.YARN_MASTERS}
            ZOOKEEPER: ${roles.ZOOKEEPER_MASTERS}
            HBASE: ${roles.HBASE_MASTERS}
        }
    }

    workers {
        count: worker-count-REPLACE-ME

        instance: ${instances.worker} {
            tags {
                group: worker
            }
        }

        roles {
            HDFS: ${roles.HDFS_WORKERS}
            YARN: ${roles.YARN_WORKERS}
            HBASE: ${roles.HBASE_WORKERS}
        }
    }
}
